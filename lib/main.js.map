{
  "version": 3,
  "file": "main.js",
  "sourceRoot": "..",
  "sources": [
    "src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n\n\"use strict\"\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'TIMETUNNEL/MAIN'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\nrainbow                   = CND.rainbow.bind CND\n{ jr, }                   = CND\nMultimix                  = require 'multimix'\nINTCODEC                  = require './integer-codec'\n#...........................................................................................................\ntypes                     = require './types'\n{ isa\n  validate\n  declare\n  size_of\n  type_of }               = types\n\n\n\n#-----------------------------------------------------------------------------------------------------------\n### from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions ###\nesc_re = ( text ) -> text.replace /[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"\n\n\n#===========================================================================================================\nclass @Timetunnel extends Multimix\n  # @extend   object_with_class_properties\n  # @include require './cataloguing'\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( settings ) ->\n    super()\n    validate.timetunnel_settings settings\n    @guards               = settings?.guards  ? '\\x10\\x11\\x12\\x13\\x14'\n    @intalph              = settings?.intalph ? '0123456789'\n    ### TAINT reduplicates some tests, `Array.from()` calls ###\n    validate.timetunnel_collisionfree_texts @guards, @intalph\n    @guards               = Array.from @guards\n    #.......................................................................................................\n    @chr_count            = @guards.length\n    @delta                = ( @chr_count + 1 ) / 2 - 1\n    @master               = @guards[ @chr_count - @delta - 1 ]\n    @meta_chr_patterns    = ( /// #{esc_re @guards[ idx ]} ///gu            for idx in [ 0 .. @delta ] )\n    @target_seq_chrs      = ( \"#{@master}#{@guards[ idx + @delta ]}\"        for idx in [ 0 .. @delta ] )\n    @target_seq_patterns  = ( /// #{esc_re @target_seq_chrs[ idx ]} ///gu for idx in [ 0 .. @delta ] )\n    @cloaked              = @guards[ 0 ... @delta ]\n    @reveal_pattern       = /// #{esc_re @cloaked[ 0 ]} ( [ #{esc_re @intalph} ]+ ) #{esc_re @cloaked[ 1 ]} ///gu\n    @tunnels              = []\n    @_cache               = []\n    @_index               = {}\n\n  #---------------------------------------------------------------------------------------------------------\n  hide: ( text ) ->\n    R = text\n    for idx in [ @delta .. 0 ] by -1\n      R = R.replace @meta_chr_patterns[ idx ], @target_seq_chrs[ idx ]\n    for pattern in @tunnels\n      R = @_hide_pattern pattern, R\n    return R\n\n  #---------------------------------------------------------------------------------------------------------\n  reveal: ( text ) ->\n    R = text\n    R = @_reveal_tunneled R\n    for idx in [ 0 .. @delta ] by +1\n      R = R.replace @target_seq_patterns[ idx ], @guards[ idx ]\n    return R\n\n  #---------------------------------------------------------------------------------------------------------\n  _hide_pattern: ( pattern, text ) =>\n    R = text\n    R = R.replace pattern, ( P... ) =>\n      ### Choose entire match or first group: ###\n      $1 = if ( P.length is 3 ) then P[ 0 ] else P[ 1 ]\n      cache_idx_txt = @_store $1\n      return \"#{@cloaked[ 0 ]}#{cache_idx_txt}#{@cloaked[ 1 ]}\"\n    return R\n\n  #---------------------------------------------------------------------------------------------------------\n  _reveal_tunneled: ( text ) =>\n    R = text\n    while ( R.match @reveal_pattern )?\n      R = R.replace @reveal_pattern, ( P... ) =>\n        ### Choose entire match or first group: ###\n        $1 = if ( P.length is 3 ) then P[ 0 ] else P[ 1 ]\n        return @_retrieve $1\n    return R\n\n  #---------------------------------------------------------------------------------------------------------\n  add_tunnel: ( pattern ) ->\n    validate.timetunnel_tunnel_pattern pattern\n    @tunnels.push pattern\n\n\n  #=========================================================================================================\n  # CACHE\n  #---------------------------------------------------------------------------------------------------------\n  _store: ( x ) ->\n    return R if ( R = @_index[ x ] )?\n    R             = @_cache.length\n    @_index[ x ]  = R\n    @_cache.push x\n    return INTCODEC.encode R, @intalph\n\n  #---------------------------------------------------------------------------------------------------------\n  _retrieve: ( idx_txt ) ->\n    idx = INTCODEC.decode idx_txt, @intalph\n    unless ( idx >= 0 ) and ( idx < @_cache.length )\n      throw new Error \"µ44292 index out of bounds, got #{rpr idx}\"\n    return @_cache[ idx ]\n\n\n#===========================================================================================================\n# TUNNELS\n#-----------------------------------------------------------------------------------------------------------\n@tunnels =\n  remove_backslash:   /// \\\\ ( . ) ///gu\n  keep_backslash:     /// ( \\\\ . ) ///gu\n  htmlish:            /// ( < [^>]*? > ) ///gu\n\n\n\n\n\n\n"
  ]
}